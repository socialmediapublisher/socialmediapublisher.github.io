socialmediapublishertestwebsite
<?php
		private function _getUserAccessToken() {
			$params = array(
				'endpoint_url' => 'https://api.instagram.com/oauth/access_token',
				'type' => 'POST',
				'url_params' => array(
					'app_id' => '1079924572594402',
					'app_secret' => 'a3f31b213283bf291160e3a1a0efb24e',
					'grant_type' => 'authorization_code',
					'redirect_uri' => 'https://socialmediapublisher.github.io/'
					'code' => isset( $_GET['code'] ) ? $_GET['code'] : ''
				)
			);
$_userAccessToken = ""



			$response = _makeApiCall( $params );
			return $response;
		}

private function _makeApiCall( $params ) {
			$ch = curl_init();

			$endpoint = $params['endpoint_url'];

			if ( 'POST' == $params['type'] ) { // post request
				curl_setopt( $ch, CURLOPT_POSTFIELDS, http_build_query( $params['url_params'] ) );
				curl_setopt( $ch, CURLOPT_POST, 1 );
			} elseif ( 'GET' == $params['type'] && !$params['url_params']['paging'] ) { // get request
				$params['url_params']['access_token'] = $_userAccessToken;

				//add params to endpoint
				$endpoint .= '?' . http_build_query( $params['url_params'] );
			}

			// general curl options
			curl_setopt( $ch, CURLOPT_URL, $endpoint );

			curl_setopt( $ch, CURLOPT_SSL_VERIFYHOST, false );
			curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false );
			curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

			$response = curl_exec( $ch );

			curl_close( $ch );

			$responseArray = json_decode( $response, true );

			if ( isset( $responseArray['error_type'] ) ) {
				var_dump( $responseArray );
				die();
			} else {
				return $responseArray;
			}
		}
?>
